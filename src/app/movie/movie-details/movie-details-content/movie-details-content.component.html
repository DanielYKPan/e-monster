<section class="movie-details-container movie-details-content">
    <div class="sidenav">
        <div class="poster-frame">
            <img [lazyLoad]="'https://image.tmdb.org/t/p/w780' + movie.poster_path"
                 [errorImage]="'/assets/images/abstract-image.jpg'"
                 alt="Poster">
        </div>

        <button class="basic-btn movie-details-button collection-button">
            <i class="icon fas fa-plus"></i> Add to Collection
        </button>

        <ul class="external-list">
            <li *ngIf="movie.homepage"
                class="external-item" owlTooltip="Official Homepage">
                <a [href]="movie.homepage" target="_blank">Official</a>
            </li>

            <li *ngIf="movie.external_ids.imdb_id"
                class="external-item" owlTooltip="IMDB">
                <a [href]="'http://www.imdb.com/title/' + movie.external_ids.imdb_id"
                   target="_blank">IMDB</a>
            </li>

            <li *ngIf="movie.external_ids.id"
                class="external-item" owlTooltip="TMDB">
                <a [href]="'https://www.themoviedb.org/movie/' + movie.external_ids.id"
                   target="_blank">TMDB</a>
            </li>

            <li *ngIf="movie.external_ids.facebook_id"
                class="external-item" [owlTooltip]="'Facebook @' + movie.external_ids.facebook_id">
                <a [href]="'http://www.facebook.com/' + movie.external_ids.facebook_id"
                   target="_blank"><i class="fab fa-facebook-f"></i></a>
            </li>

            <li *ngIf="movie.external_ids.instagram_id"
                class="external-item" [owlTooltip]="'Instagram @' + movie.external_ids.instagram_id">
                <a [href]="'http://www.instagram.com/' + movie.external_ids.instagram_id"
                   target="_blank"><i class="fab fa-instagram"></i></a>
            </li>

            <li *ngIf="movie.external_ids.twitter_id"
                class="external-item" [owlTooltip]="'Twitter @' + movie.external_ids.twitter_id">
                <a [href]="'http://www.twitter.com/' + movie.external_ids.twitter_id"
                   target="_blank"><i class="fab fa-twitter"></i></a>
            </li>
        </ul>
    </div>
    <div class="main">
        <ul class="stats">
            <li class="stats-item release">
                <label>release:</label>
                {{movie.release_date | toDate | date}}
            </li>

            <li class="stats-item runtime">
                <label>runtime:</label>
                {{movie.runtime}} mins
            </li>

            <li class="stats-item country">
                <label>country:</label>
                <span *ngFor="let country of movie.production_countries">{{country.name}}</span>
            </li>

            <li class="stats-item directors">
                <label>directors:</label>
                <span *ngFor="let director of movieDirectors">{{director.name}}</span>
            </li>

            <li class="stats-item writers">
                <label>writers:</label>
                <span *ngFor="let writer of movieWriters">{{writer.name}}</span>
            </li>

            <li class="stats-item language">
                <label>language:</label>
                <span *ngFor="let language of movie.spoken_languages">{{language.name}}</span>
            </li>

            <li class="stats-item genres">
                <label>genres</label>
                <span *ngFor="let genre of movie.genres">{{genre.name}}</span>
            </li>

            <li class="stats-item links">
                <label>links:</label>
                <a *ngIf="movie.homepage" [href]="movie.homepage" target="_blank">Official</a>
                <a *ngIf="movie.external_ids.imdb_id"
                   [href]="'http://www.imdb.com/title/' + movie.external_ids.imdb_id"
                   target="_blank">IMDB</a>
                <a *ngIf="movie.external_ids.id"
                   [href]="'https://www.themoviedb.org/movie/' + movie.external_ids.id"
                   target="_blank">TMDB</a>
                <a *ngIf="movie.external_ids.facebook_id"
                   [href]="'http://www.facebook.com/' + movie.external_ids.facebook_id"
                   target="_blank">Facebook</a>
                <a *ngIf="movie.external_ids.twitter_id"
                   [href]="'http://www.twitter.com/' + movie.external_ids.twitter_id"
                   target="_blank">Twitter</a>
                <a *ngIf="movie.external_ids.instagram_id"
                   [href]="'http://www.instagram.com/' + movie.external_ids.instagram_id"
                   target="_blank">Instagram</a>
            </li>
        </ul>

        <p class="tagline">
            {{movie.tagline}}
        </p>

        <p class="overview">
            {{movie.overview}}
        </p>

        <section class="videos-wrapper">
            <h2>Videos</h2>

            <ul class="video-list">
                <li *ngFor="let video of movieVideos"
                    class="basic-btn movie-details-button video"
                    (click)="clickVideo(video, $event)">
                    <i class="icon fab fa-youtube"></i>
                    {{video.type}}
                </li>
            </ul>
        </section>

        <section class="cast-crew-wrapper">
            <div class="cast-crew-title">
                <h2>Cast & Crew</h2>
                <button class="basic-btn movie-details-button cast-crew-full-button"
                        (click)="clickFullCastCrew($event)">
                    Â» See full cast & crew
                </button>
            </div>

            <div class="cast-crew-content">
                <button class="basic-btn movie-details-button cast-crew-control"
                        (click)="slideLeftCastList($event)">
                    <i class="fas fa-angle-left"></i>
                </button>

                <div class="cast-crew-wrapper" #castListWrapper>
                    <ul class="cast-crew-list"
                        [style.width.px]="movie.credits.cast.length * castProfileWidth"
                        [style.transform]="'translateX(' + -castListSlideDistance + 'px)'" #castList>
                        <li *ngFor="let cast of movie.credits.cast" class="cast-crew-list-item"
                            [style.width.px]="castProfileWidth">
                            <a class="cast-crew-anchor" [routerLink]="'/people/actor/' + cast.id">
                                <img *ngIf="cast.profile_path;else abstractImg" class="cast-crew-poster"
                                     [src]="'https://image.tmdb.org/t/p/w185/' + cast.profile_path" alt="Poster"/>
                                <ng-template #abstractImg>
                                    <img class="cast-crew-poster"
                                         src="/assets/images/abstract-profile.png"/>
                                </ng-template>
                                <h4 class="character">{{cast.character}}</h4>
                                <h4 class="name">{{cast.name}}</h4>
                            </a>
                        </li>
                    </ul>
                </div>

                <button class="basic-btn movie-details-button cast-crew-control"
                        (click)="slideRightCastList($event)" #rightControlBtn>
                    <i class="fas fa-angle-right"></i>
                </button>
            </div>
        </section>

        <section class="reviews">
            <ng-container *ngIf="movie.reviews.total_results > 0;else noReviewsTemplate">
                <h2 class="reviews-title">Reviews</h2>

                <div *ngFor="let review of movie.reviews.results" class="review-card">
                    <div class="review-card-author">
                        {{review.author}}
                    </div>
                    <div class="review-card-content">
                        {{review.content}}
                    </div>
                </div>
            </ng-container>
            <ng-template #noReviewsTemplate>
                <h2 class="no-review-title">No Reviews found</h2>
            </ng-template>
        </section>
    </div>
</section>
